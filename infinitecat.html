<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>InfiniteCat</title>

    <!-- Style dependencies -->
    <link href="https://unpkg.com/normalize.css@^7.0.0" rel="stylesheet" />
    <!-- Blueprint stylesheets -->
    <link
      href="https://unpkg.com/@blueprintjs/icons@^3.4.0/lib/css/blueprint-icons.css"
      rel="stylesheet"
    />
    <link
      href="https://unpkg.com/@blueprintjs/core@^3.10.0/lib/css/blueprint.css"
      rel="stylesheet"
    />
  </head>
  <body>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <!-- Blueprint dependencies -->
    <script src="https://unpkg.com/classnames@^2.2"></script>
    <script src="https://unpkg.com/dom4@^1.8"></script>
    <script src="https://unpkg.com/tslib@^1.9.0"></script>
    <script src="https://unpkg.com/react@^16.2.0/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@^16.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/react-transition-group@^2.2.1/dist/react-transition-group.min.js"></script>
    <script src="https://unpkg.com/popper.js@^1.14.1/dist/umd/popper.js"></script>
    <script src="https://unpkg.com/react-popper@^1.0.0/dist/index.umd.min.js"></script>
    <script src="https://unpkg.com/resize-observer-polyfill@^1.5.0"></script>
    <!-- Blueprint packages (note: icons script must come first) -->
    <script src="https://unpkg.com/@blueprintjs/icons@^3.4.0"></script>
    <script src="https://unpkg.com/@blueprintjs/core@^3.10.0"></script>

    <div
      style="
        display: flex;
        flex-direction: row;
        justify-content: center;
        align-items: center;
      "
    >
      <a
        href="https://donatomolino.it"
        style="
          flex-grow: 1;
          font-size: 20px;
          font-weight: bold;
          text-shadow: gray 5px 5px 10px;
        "
        >donatomolino.it</a
      >
      <a
        href="https://t.me/donatomolino"
        style="
          font-size: 20px;
          font-weight: bold;
          text-shadow: gray 5px 5px 10px;
        "
        >Telegram Channel</a
      >
    </div>

    <div
      style="
        display: flex;
        flex-direction: column;
        align-items: center;
        height: 100%;
        width: 100%;
      "
      id="mainCat"
    ></div>

    <script>
      newImg();
      newImg();
      newImg();
      newImg();
      newImg();
      function newImg() {
        var request = new XMLHttpRequest();

        request.open("GET", "https://aws.random.cat/meow", true);
        request.onload = function () {
          // Begin accessing JSON data here
          var data = JSON.parse(this.response);

          if (request.status >= 200 && request.status < 400) {
            console.log(data.file);

            var img = document.createElement("img");
            img.src = data.file;
            img.classList.add("imgCat");
            var element = document.getElementById("mainCat");
            element.appendChild(img);
          } else {
            console.log("error");
          }
        };

        request.send();
      }

      $(window).scroll(function () {
        if (
          $(window).scrollTop() + $(window).height() >=
          $(document).height() / 1.3
        ) {
          newImg();
        }
      });
    </script>

    <style>
      .imgCat {
        margin: 10px;
        box-shadow: rgb(61, 61, 61) 5px 5px 10px;
        max-width: 90vw;
        max-height: 90vh;
      }
    </style>
  </body>
</html>
